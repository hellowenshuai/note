### 物流系统数据库分析

1. 首先，发货客户与快递公司签订**货运合同(货运单)**，把货物交给快递公司来托运，并按照货运合同的付款方式付款。（前提有发货客户，和收货客户，生成 货运单**goodsbill-->goodsbillevent-->-billinfo**

   **-->cargoreceipt detail）**

2. 快递公司根据货物运输线路，为货物配车，找到合适的车辆后，与司机签订**运输合同(回执单)**，(cargoreceipt-->billinfo)

3. 并按照运输合同的运费结算方式结算。司机对货物检查无误后，装车，然后发车，发车后，货物的任何损失由司机承担。

4. 司机到达目的地后，需要经过货物验收，验收通过，填写一份**司机回执单**，快递公司这时同时通知发货客户和收货客户，货物已到达。

5. 如果货物没有通过验收，则填写差错记录。

   

6. 如果该货物不需要中转，通知收货客户来提货，客户验收通过后，填写**客户回执单**，快递公司这时通知发货客户，所发货物已被提走。

7. 

8. 如果该货物需要中转，则填写一份**中转信息单**，快递公司这时同时通知发货客户和收货客户，货物已被中转。

9. 中转成功后，收货客户来提货，并通知发货客户，货物已被提，然后进行转货结算。

#### 关键字抽取 

发货方，收货方，物流公司，司机，中转城市，各种单子。

发货方和物流签订货运合同（货运单），

物流公司和司机签订运输合同（回执单）

1. 司机到达目的地，验货，

​	通过，写司机回执单。

​	不通过，写差错记录。

2. 需要中转站，填写中转信息单。并且通知，收发客户，货物当前状态。

      中转成功后，收货客户来提货，并通知发货客户，货物已被提，进行尾款交付

3. 不需要中转站，通知客户来取货，客户验收通过，填写客户回执单，并通过发货方。

票据管理

票据分发，将该货运单分配给司机，前提，司机先填写运输合同（回执单）

这个操作会将货运单和运输单的状态从“待发”-->未到。

url：http://127.0.0.1:9999/bill/addRelease/HY770674

1. releasePerson: 

   

   GL846489

2. receiveBillPerson: 

   

   SJ065481

3. receiveBillTime: 

   

   2019-03-11

4. acceptStation: 

   

   杭州



接货管理

配车管理

| 1    | HY545909 | 未到 | 单据已填 | 2019-03-17 | 查看详情 |
| ---- | -------- | ---- | -------- | ---------- | -------- |
| 2    | HY007917 | 未到 | 单据已填 | 2019-03-17 | 查看详情 |

| 1    | HZ544941 | 未到车辆 | 上海第一公司 | 查看详情 |
| ---- | -------- | -------- | ------------ | -------- |
| 2    | HZ641120 | 未到车辆 | 上海第一公司 | 查看详情 |

```mysql
find By GoodsBillCode Or TransferStation  
select *
from TransferInfo
where goodsbillcode = HY910010
and transferstation = %无锡%
```

针对客户需要代收款的情况进行结算。

当佣金率 \* 实收货款 > 已收佣金，

或者佣金率 > 0 且实收货款 = 0

或者应收佣金不等于 0 时，

为未结代收结算



​			

| 回执单   | 货运单   | 中转城市数量 | 当前状态 | 司机          | 客服             | bug                                    |
| -------- | -------- | ------------ | -------- | ------------- | ---------------- | -------------------------------------- |
| HZ182401 | HY865117 | 2            | 未发     | 2次中转回执单 | 填写两次中转回告 |                                        |
| HZ061371 | HY362379 | 2            | 未结     | 到达常州      | 填写第一中转回告 | 司机在中转动作没有完成时，不能确认到货 |
| HZ819399 | HY381732 | 1            | 未发     |               |                  |                                        |
| HZ463666 | HY264944 | 0            | 未发     |               |                  |                                        |
|          |          |              |          |               |                  |                                        |
|          |          |              |          |               |                  |                                        |

线路：杭州-常州-无锡-上海

http://localhost:63343/logistics-front-master/html/customerService/writeInform.html?

id=HY865117&type=%E4%B8%AD%E8%BD%AC%E5%9B%9E%E5%91%8A

前台添加echarts

demo

shadow

![1553776635054](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1553776635054.png)



![1553776664886](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1553776664886.png)



、HY482887